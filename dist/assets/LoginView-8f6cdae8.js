import{m as $,u as A,f as j,r as I,q as M,a2 as e,o as D,i as F,b as o,d as k,v as C,e as f,Z as B,P as K,a3 as q,a4 as P,Q,R as Y}from"./index-e77d52a8.js";import{_ as Z}from"./inffits_f_black-f5176971.js";import"./bootstrap.min-6e4ebdd2.js";const i=u=>(Q("data-v-bb7684e7"),u=u(),Y(),u),z={class:"body"},G=i(()=>o("div",{class:"preloader",id:"loader"},[o("img",{src:Z}),o("div",{class:"cssload-speeding-wheel"})],-1)),H={class:"splash-container",style:{position:"relative"}},J={class:"card"},W=K('<div class="card-header text-center" data-v-bb7684e7><div data-v-bb7684e7><img class="logo-img" src="https://myinffits.com/images/infFITS_Logo_2019_web.png" width="125px" alt="logo" data-v-bb7684e7><div style="padding:8px;cursor:pointer;color:darkgray;position:absolute;right:0;top:0;" id="langswitch" data-v-bb7684e7><span data-v-bb7684e7>English</span> <i class="fa fa-angle-down" data-v-bb7684e7></i></div></div><span class="splash-description" data-v-bb7684e7><span class="lang-en" data-v-bb7684e7>Log in to infFITS Admin</span><span class="lang-tw" data-v-bb7684e7>登入 infFITS Admin</span></span></div>',1),X={class:"card-body"},ee=i(()=>o("div",{class:"form-group"},[o("input",{class:"form-control form-control-lg",id:"emailInput",type:"text",placeholder:"Email",autocomplete:"off",style:{display:"none"}})],-1)),oe={class:"form-group"},te={class:"form-group"},ne=i(()=>o("div",{class:"form-group"},[o("input",{class:"form-control form-control-lg",id:"confirmPasswordInput",type:"password",placeholder:"Password",style:{display:"none"}})],-1)),se=i(()=>o("br",null,null,-1)),ie={class:"form-group",id:"Verification",style:{display:"none"}},ae=i(()=>o("input",{class:"form-control form-control-lg",id:"verificationCodeInput",type:"text",placeholder:"Verification Code"},null,-1)),le=i(()=>o("br",null,null,-1)),re=i(()=>o("div",{class:"form-group",id:"logintext"},"請確認帳號密碼，再試一次。",-1)),de=["onClick","onTouchend"],ce=i(()=>o("span",{class:"lang-en"},"Log in",-1)),ue=i(()=>o("span",{class:"lang-tw"},"登入",-1)),pe=[ce,ue],fe={style:{"margin-top":"16px","text-align":"center"}},he={class:"lang-en"},ge={class:"lang-tw"},me={class:"card-footer bg-white p-0",id:"backtoLogin",style:{"text-align":"center",display:"none"}},ve=i(()=>o("div",{href:"#",class:"footer-link"},"Back to Login",-1)),we=[ve],be=i(()=>o("div",{class:"footer",style:{position:"absolute",left:"0",bottom:"0",background:"transparent"}},[o("div",{class:"col-md-7"},[o("p",null,[o("a",{style:{color:"gray","font-weight":"400",cursor:"pointer"},href:"https://www.inffits.com/Privacy.html"},[o("span",null,"隱私權聲明")]),f("  |  "),o("a",{style:{color:"gray","font-weight":"400",cursor:"pointer"},href:"https://www.inffits.com/Terms.html"},[o("span",null,"使用條款")])])])],-1)),_e={__name:"LoginView",setup(u){const c=A(),{userPool:w,getcurrentloggedinsession:x}=j(),r=I(""),p=I("");function S(){e("#emailInput").hide(),e("#userNameInput").hide(),e("#passwordInput").hide(),e("#confirmPasswordInput").hide(),e("#logInButton").hide(),e("#registerButton").hide(),e("#bucketNameInput").hide(),e("#verificationCodeInput").show(),e("#verifyCodeButton").show(),e("#listS3ObjectsButton").hide(),e("#logOutButton").hide(),e("#createAccount").hide(),e("#Verification").show()}function V(){e("#emailInput").show(),e("#userNameInput").show(),e("#passwordInput").show(),e("#confirmPasswordInput").show(),e("#logInButton").hide(),e("#registerButton").show(),e("#verificationCodeInput").hide(),e("#verifyCodeButton").hide(),e("#listS3ObjectsButton").hide(),e("#bucketNameInput").hide(),e("#logOutButton").hide(),e("#backtoLogin").show(),e("#createAccount").hide()}function b(){e("#userNameInput").val(""),e("#passwordInput").val(""),e("#emailInput").hide(),e("#userNameInput").show(),e("#passwordInput").show(),e("#confirmPasswordInput").hide(),e("#logInButton").show(),e("#registerButton").show(),e("#verificationCodeInput").hide(),e("#verifyCodeButton").hide(),e("#listS3ObjectsButton").hide(),e("#bucketNameInput").hide(),e("#logOutButton").hide(),e("#registerButton").hide(),e("#createAccount").show(),e("#backtoLogin").hide()}function a(n){return console.log(n),!0}function h(){e("#loader").show(),!r.value||!p.value?(a("Please enter Username and Password!"),e("#logintext").show(),e("#loader").hide()):c.login(r.value,p.value)}function g(n){n=n||window.event,n.keyCode==13&&h()}function U(){V(),N();var n={Username:r.value,Pool:w};c.cognitoUser=new q(n),!e("#emailInput").val()||!r.value||!e("#passwordInput").val()||!e("#confirmPasswordInput").val()?a("Please fill all the fields!"):e("#passwordInput").val()==e("#confirmPasswordInput").val()?L(e("#emailInput").val(),r.value,e("#passwordInput").val()):a("Confirm password failed!")}function T(){e("#verificationCodeInput").val()?(e("#loader").show(),c.cognitoUser.confirmRegistration(e("#verificationCodeInput").val(),!0,function(n,t){n?a(n.message):(console.log(t),a("Successfully verified code!"),b()),e("#loader").hide()})):a("Please enter verification field!")}function L(n,t,s){var d=[],m={Name:"email",Value:n},v={Name:"name",Value:t},O=new P(m),E=new P(v);d.push(O),d.push(E),console.log(d),e("#loader").show(),w.signUp(t,s,d,null,function(y,R){y?a(y.message):(c.cognitoUser=R.user,a("Registration Successful!"),a("Username is: "+c.cognitoUser.getUsername()),a("Please enter the verification code sent to your Email."),S()),e("#loader").hide()})}function N(){e("#loader").show(),x()==0&&(e("#loader").hide(),window.location.href.includes("Login.html")||(e("#loader").show(),window.location.href="Login.html"))}M(()=>{e("#langswitch").on("click",function(){var n=e("#langswitch").find("span")[0].innerText;n=="繁體中文"?e("#langswitch").find("span")[0].innerText="English":e("#langswitch").find("span")[0].innerText="繁體中文",e(".lang-en").toggle(),e(".lang-tw").toggle()}),e(".form-control").on("propertychange input",function(){e("#logintext").hide()}),e(function(){e("#loader").hide(),Object.prototype.hasOwnProperty.call(l(document.location.href),"referral")&&l(document.location.href).referral=="admin"?console.log(Object.prototype.hasOwnProperty.call(l(document.location.href),"referral")):Object.prototype.hasOwnProperty.call(l(document.location.href),"platform")&&(l(document.location.href).platform=="EASYSTORE"?document.location.href="Register_form_easystore.html":l(document.location.href).platform=="CYBERBIZ"&&(document.location.href="Register_form_cyberbiz.html"))})});function l(n){const t=n.split("?")[1],s={};return t&&t.split("&").forEach(d=>{const[m,v]=d.split("=");s[m]=decodeURIComponent(v)}),s}function _(){window.location.href.includes("?")&&"platform"in l(document.location.href)?window.location.href="signup?platform="+l(document.location.href).platform:window.location.href="/#/signup"}return(n,t)=>(D(),F("div",z,[G,o("div",H,[o("div",J,[W,o("div",X,[o("form",null,[ee,o("div",oe,[k(o("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>r.value=s),class:"form-control form-control-lg",id:"userNameInput",type:"text",placeholder:"Username",autocomplete:"off",onKeypress:t[1]||(t[1]=s=>g(n.event))},null,544),[[C,r.value]])]),o("div",te,[k(o("input",{"onUpdate:modelValue":t[2]||(t[2]=s=>p.value=s),class:"form-control form-control-lg",id:"passwordInput",type:"password",placeholder:"Password",onKeypress:t[3]||(t[3]=s=>g(n.event))},null,544),[[C,p.value]])]),ne,o("div",{type:"submit",id:"registerButton",onClick:t[4]||(t[4]=s=>U()),class:"btn btn-primary btn-lg btn-block",style:{display:"none"}},"註冊"),se,o("div",ie,[ae,f(),le,o("input",{class:"btn btn-primary btn-lg btn-block",id:"verifyCodeButton",type:"button",value:"Verify",onClick:t[5]||(t[5]=s=>T())})]),re,o("div",{id:"logInButton",onKeypress:t[6]||(t[6]=s=>g(n.event)),onClick:B(h,["prevent","stop"]),onTouchend:B(h,["prevent","stop"]),class:"btn btn-primary btn-lg btn-block"},pe,40,de),o("div",fe,[o("span",he,[f("Don't have an account? "),o("a",{style:{color:"black","font-weight":"500",cursor:"pointer"},onClick:t[7]||(t[7]=s=>_()),target:"_blank"},"Sign Up")]),o("span",ge,[f("尚未擁有登入資訊? "),o("a",{style:{color:"black","font-weight":"500",cursor:"pointer"},onClick:t[8]||(t[8]=s=>_()),target:"_blank"},"申請服務")])])]),o("div",me,[o("div",{class:"card-footer-item card-footer-item-bordered",onClick:t[9]||(t[9]=s=>b())},we)])])])]),be]))}},Ce=$(_e,[["__scopeId","data-v-bb7684e7"]]);export{Ce as default};
